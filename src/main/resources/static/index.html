<!-- src/main/resources/static/index.html -->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>자유 게시판</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="container">
    <header>
        <h1>자유 게시판</h1>
        <nav id="auth-nav">
            <!-- 로그인/로그아웃 버튼은 JS로 동적으로 추가됩니다. -->
        </nav>
    </header>

    <main>
        <div class="search-container">
            <input type="text" id="search-input" placeholder="제목 또는 내용으로 검색">
            <button onclick="searchPosts()">검색</button>
        </div>
        <table id="posts-table">
            <thead>
            <tr>
                <th>제목</th>
                <th>작성자</th>
                <th>작성일</th>
                <th>조회수</th>
                <th>좋아요</th>
            </tr>
            </thead>
            <tbody>
            <!-- 게시글 목록은 JS로 동적으로 추가됩니다. -->
            </tbody>
        </table>
        <div class="pagination" id="pagination">
            <!-- 페이지네이션은 JS로 동적으로 추가됩니다. -->
        </div>
        <!-- '글쓰기' 버튼을 위한 컨테이너 추가 -->
        <div class="write-btn-container">
            <button onclick="location.href='/write.html'" class="btn">글쓰기</button>
        </div>
    </main>
</div>

<script src="/js/main.js"></script>
<script>
    // 페이지가 로드되면 실행될 함수들
    window.onload = function() {
        updateAuthUI(); // 로그인 상태에 따라 UI 업데이트
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page') || 0; // URL에서 페이지 번호 가져오기
        const search = urlParams.get('search') || ''; // URL에서 검색어 가져오기
        document.getElementById('search-input').value = search;
        fetchPosts(page, search); // 게시글 목록 불러오기
    };
</script>
</body>
</html>