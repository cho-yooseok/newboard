<!-- src/main/resources/static/admin.html  -->

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>관리자 페이지</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="container">
    <header>
        <h1>관리자 페이지</h1>
        <!-- === 링크 텍스트 수정 및 클래스 제거 === -->
        <a href="/index.html">메인페이지로 돌아가기</a>
    </header>

    <main>
        <div class="tabs">
            <button class="tab-link active" onclick="openTab(event, 'users')">사용자 관리</button>
            <button class="tab-link" onclick="openTab(event, 'posts')">게시글 관리</button>
            <button class="tab-link" onclick="openTab(event, 'comments')">댓글 관리</button>
        </div>

        <!-- 사용자 관리 -->
        <div id="users" class="tab-content" style="display: block;">
            <h2>사용자 목록</h2>
            <table id="admin-users-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>사용자 이름</th>
                    <th>역할</th>
                    <th>가입일</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- 게시글 관리 -->
        <div id="posts" class="tab-content">
            <h2>게시글 목록</h2>
            <input type="text" id="admin-post-search" placeholder="게시글 검색...">
            <button onclick="searchAdminPosts()">검색</button>
            <table id="admin-posts-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>상태</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

        <!-- 댓글 관리 -->
        <div id="comments" class="tab-content">
            <h2>댓글 목록</h2>
            <input type="text" id="admin-comment-search" placeholder="댓글 내용 검색...">
            <button onclick="searchAdminComments()">검색</button>
            <table id="admin-comments-table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>내용</th>
                    <th>작성자</th>
                    <th>원문 게시글</th>
                    <th>관리</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </main>
</div>
<script src="/js/main.js"></script>
<script>
    window.onload = function() {
        checkAdminAccess();
        fetchAdminUsers();
        fetchAdminPosts();
        fetchAdminComments();
    };

    function openTab(evt, tabName) {
        let i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tab-link");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>
</body>
</html>